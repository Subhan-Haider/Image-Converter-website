<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description"
        content="Professional online image converter with batch processing, compression, and premium features.">
    <title>Image Converter Pro | Precision Image Processing</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="stylesheet" href="toast.css">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#6366f1">
    <link rel="icon" type="image/svg+xml" href="favicon.svg">
    <link rel="apple-touch-icon" href="favicon.svg">
</head>

<body class="fade-in">
    <div class="container">
        <header>
            <div class="header-top">
                <button class="theme-toggle" id="themeToggle" title="Toggle Light/Dark Theme">
                    <span class="theme-icon">üåô</span>
                </button>
            </div>
            <div class="logo-container">
                <img src="favicon.svg" alt="Image Converter Pro Logo" class="header-logo">
                <h1>Image Converter Pro</h1>
            </div>
            <p class="subtitle">Studio-grade conversion, compression & batch processing in your browser</p>
        </header>

        <!-- Upload Section -->
        <section class="upload-section">
            <div class="glass-card upload-area" id="uploadArea">
                <div class="upload-content">
                    <svg class="upload-icon" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                        <polyline points="17 8 12 3 7 8"></polyline>
                        <line x1="12" y1="3" x2="12" y2="15"></line>
                    </svg>
                    <h2>Drop Your Media Here</h2>
                    <p>Browse, Drag & Drop, or <strong>Paste (Ctrl+V)</strong> images</p>
                    <div class="formats">Supports PNG, JPG, WEBP, AVIF, HEIC, SVG & more</div>
                    <input type="file" id="fileInput" multiple accept="image/*" hidden>
                    <input type="file" id="folderInput" multiple webkitdirectory="" hidden>
                </div>
            </div>
        </section>

        <!-- Main Dashboard -->
        <main id="mainDashboard" style="display: none;">
            <div class="settings-panel">
                <!-- Left Column: Primary Settings -->
                <div class="settings-column">
                    <div id="userPresetsSection" class="glass-card" style="display: none; margin-bottom: 1rem;">
                        <h3 style="margin-bottom: 1rem;">üë§ Your Presets</h3>
                        <div id="userPresetsList" class="preset-buttons"></div>
                    </div>

                    <div class="glass-card">
                        <h3 style="margin-bottom: 1.5rem;">üé≠ Conversion Presets</h3>
                        <div class="preset-buttons">
                            <button class="preset-btn active" data-preset="none">Standard</button>
                            <button class="preset-btn" data-preset="logo">Logo Pack</button>
                            <button class="preset-btn" data-preset="favicon">Favicon</button>
                            <button class="preset-btn" data-preset="android">Android</button>
                            <button class="preset-btn" data-preset="ios">iOS Icons</button>
                            <button class="preset-btn" data-preset="social">Social Media</button>
                            <button class="preset-btn" data-preset="custom-list">Custom List</button>
                        </div>
                        <div class="preset-info" id="presetInfo"
                            style="margin-top: 1rem; font-size: 0.9rem; color: var(--text-secondary);"></div>

                        <div id="customSizeListSection"
                            style="display: none; margin-top: 1.5rem; border-top: 1px solid rgba(255,255,255,0.1); padding-top: 1rem;">
                            <div
                                style="display: grid; grid-template-columns: 1fr 1fr auto; gap: 0.5rem; align-items: end; margin-bottom: 1rem;">
                                <div class="setting-group" style="margin: 0;">
                                    <label style="font-size: 0.8rem;">Width</label>
                                    <input type="number" id="newSizeWidth" placeholder="Auto" style="padding: 0.5rem;">
                                </div>
                                <div class="setting-group" style="margin: 0;">
                                    <label style="font-size: 0.8rem;">Height</label>
                                    <input type="number" id="newSizeHeight" placeholder="Auto" style="padding: 0.5rem;">
                                </div>
                                <button class="btn btn-primary" id="addSizeBtn"
                                    style="height: 38px; padding: 0 1rem; display: flex; align-items: center; justify-content: center;">+</button>
                            </div>
                            <label class="custom-checkbox" style="margin-bottom: 1rem; font-size: 0.9rem;">
                                <input type="checkbox" id="newSizeKeepAspect" checked>
                                <span class="checkmark"></span>
                                <span>Maintain Aspect Ratio</span>
                            </label>

                            <div id="customSizesListContainer" class="custom-sizes-list"
                                style="max-height: 200px; overflow-y: auto; display: flex; flex-direction: column; gap: 0.5rem; margin-bottom: 1rem;">
                                <!-- List items will be injected here -->
                            </div>

                            <div style="display: flex; gap: 0.5rem;">
                                <button class="btn btn-secondary" id="clearSizeListBtn"
                                    style="flex: 1; font-size: 0.9rem; padding: 0.5rem;">Clear</button>
                                <button class="btn btn-secondary" id="saveSizeListPresetBtn"
                                    style="flex: 1; font-size: 0.9rem; padding: 0.5rem;">Save Preset</button>
                            </div>
                        </div>
                    </div>

                    <div class="glass-card">
                        <h3 style="margin-bottom: 1.5rem;">‚öôÔ∏è Output Profile</h3>
                        <div class="setting-group">
                            <label>Export Format</label>
                            <select id="outputFormat">
                                <option value="png">Portable Network Graphics (PNG)</option>
                                <option value="jpg">Joint Photographic Experts Group (JPG)</option>
                                <option value="webp">Google WebP (Recommended)</option>
                                <option value="avif">AV1 Image File (AVIF)</option>
                                <option value="ico">Windows Icon (ICO)</option>
                                <option value="svg">Scalable Vector Graphics (SVG)</option>
                                <option value="bmp">Bitmap (BMP)</option>
                                <option value="tiff">Tagged Image File (TIFF)</option>
                            </select>
                        </div>
                        <div class="setting-group">
                            <label>Compression Quality: <span id="qualityValue">85</span>%</label>
                            <input type="range" id="quality" min="1" max="100" value="85">
                        </div>
                        <div class="setting-group">
                            <label>Scaling Model</label>
                            <select id="resizeMode">
                                <option value="none">Original Scale</option>
                                <option value="fit">Fit (Maintain Aspect)</option>
                                <option value="fill">Fill (Crop to Fit)</option>
                                <option value="stretch">Stretch (Distort)</option>
                                <option value="custom">Absolute Dimensions</option>
                                <option value="circular">Circular Profile</option>
                            </select>
                        </div>
                        <div class="setting-group" id="backgroundColorGroup" style="display: none;">
                            <label>Background Fill</label>
                            <select id="backgroundFillMode" style="margin-bottom: 0.5rem;">
                                <option value="color">Solid Color</option>
                                <option value="image">Custom Image</option>
                                <option value="blurred">Blurred Content</option>
                            </select>

                            <!-- Color Picker -->
                            <div id="bgColorControls" style="display: flex; gap: 0.5rem; align-items: center;">
                                <input type="color" id="backgroundColor" value="#ffffff"
                                    style="width: 40px; height: 40px; padding: 0; border: none; background: none; cursor: pointer;">
                                <div class="bg-presets" style="display: flex; gap: 0.3rem;">
                                    <button class="bg-preset-btn" data-color="#ffffff" title="White"
                                        style="width: 24px; height: 24px; background: #ffffff; border: 1px solid var(--border-light); border-radius: 4px; cursor: pointer;"></button>
                                    <button class="bg-preset-btn" data-color="#000000" title="Black"
                                        style="width: 24px; height: 24px; background: #000000; border: 1px solid var(--border-light); border-radius: 4px; cursor: pointer;"></button>
                                    <button class="bg-preset-btn" data-color="transparent" title="Transparent"
                                        style="width: 24px; height: 24px; background: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAAECAYAAACp8Z5+AAAAAXNSR0IArs4c6QAAACtJREFUGFdjZEADy0AGIyMTmGRkZIAIuLgYwRSRBC7OACYZGZkgAjY2RjBFAM9ICB6D9I9VAAAAAElFTkSuQmCC'); border: 1px solid var(--border-light); border-radius: 4px; cursor: pointer;"></button>
                                </div>
                            </div>

                            <!-- Image Upload (Hidden by default) -->
                            <div id="bgImageControls" style="display: none; margin-top: 0.5rem;">
                                <input type="file" id="bgImageInput" accept="image/*" hidden>
                                <button class="btn btn-secondary" id="bgImageBtn"
                                    style="width: 100%; font-size: 0.8rem; padding: 0.5rem;">Select BG Image</button>
                                <div id="bgImagePreview"
                                    style="margin-top: 0.5rem; text-align: center; font-size: 0.8rem; color: var(--primary); display: none;">
                                    Background Loaded</div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Right Column: Advanced & File Options -->
                <div class="settings-column">
                    <div class="glass-card">
                        <h3 style="margin-bottom: 1.5rem;">üõ†Ô∏è Advanced Processing</h3>

                        <div id="resizeDimensions" style="display: none; margin-bottom: 1rem;">
                            <div class="setting-group">
                                <label>Resize Method</label>
                                <select id="resizeType">
                                    <option value="pixels">Fixed Pixels</option>
                                    <option value="percentage">Percentage Scale</option>
                                    <option value="maxfilesize">Target File Size</option>
                                    <option value="maxdimensions">Bound Constraints</option>
                                </select>
                            </div>

                            <div id="pixelDimensions" style="display: none;">
                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                                    <div class="setting-group">
                                        <label>Width (px)</label>
                                        <input type="number" id="resizeWidth" placeholder="Auto">
                                    </div>
                                    <div class="setting-group">
                                        <label>Height (px)</label>
                                        <input type="number" id="resizeHeight" placeholder="Auto">
                                    </div>
                                </div>
                                <label class="custom-checkbox">
                                    <input type="checkbox" id="keepAspectRatio" checked>
                                    <span class="checkmark"></span>
                                    <span>Lock Aspect Ratio</span>
                                </label>
                            </div>

                            <div id="percentageDimensions" style="display: none;">
                                <label>Scale: <span id="percentageValue">100</span>%</label>
                                <input type="range" id="resizePercentage" min="1" max="500" value="100">
                            </div>
                        </div>

                        <div class="advanced-toggles" style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                            <label class="custom-checkbox">
                                <input type="checkbox" id="autoSharpening">
                                <span class="checkmark"></span>
                                <span>Auto Sharpen</span>
                            </label>
                            <label class="custom-checkbox">
                                <input type="checkbox" id="removeMetadata" checked>
                                <span class="checkmark"></span>
                                <span>Strip Metadata</span>
                            </label>
                            <label class="custom-checkbox">
                                <input type="checkbox" id="preserveTransparency" checked>
                                <span class="checkmark"></span>
                                <span>Trans. Filter</span>
                            </label>
                            <label class="custom-checkbox">
                                <input type="checkbox" id="folderImport">
                                <span class="checkmark"></span>
                                <span>Folder Mode</span>
                            </label>
                            <label class="custom-checkbox" title="Automatically add background to transparent images">
                                <input type="checkbox" id="autoBackground" checked>
                                <span class="checkmark"></span>
                                <span>Auto BG</span>
                            </label>
                        </div>

                        <div style="margin-top: 2rem; border-top: 1px solid var(--border-light); padding-top: 1.5rem;">
                            <label class="custom-checkbox" style="margin-bottom: 1rem;">
                                <input type="checkbox" id="addWatermark">
                                <span class="checkmark"></span>
                                <span style="font-weight: 600;">Apply Watermark</span>
                            </label>

                            <div id="watermarkSettings" style="display: none; padding-left: 0.5rem;">
                                <div class="setting-group">
                                    <label>Text</label>
                                    <input type="text" id="watermarkText" placeholder="¬© My Watermark"
                                        value="¬© Copyright 2025">
                                </div>

                                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                                    <div class="setting-group">
                                        <label>Color</label>
                                        <div style="display: flex; gap: 0.5rem; align-items: center;">
                                            <input type="color" id="watermarkColor" value="#ffffff"
                                                style="width: 40px; height: 40px; padding: 0; border: none; background: none;">
                                            <span style="font-size: 0.8rem; color: var(--text-secondary);">Pick
                                                Color</span>
                                        </div>
                                    </div>
                                    <div class="setting-group">
                                        <label>Opacity: <span id="watermarkOpacityValue">50</span>%</label>
                                        <input type="range" id="watermarkOpacity" min="10" max="100" value="50">
                                    </div>
                                </div>

                                <div class="setting-group">
                                    <label>Position</label>
                                    <select id="watermarkPosition">
                                        <option value="center">Center</option>
                                        <option value="bottom-right" selected>Bottom Right</option>
                                        <option value="bottom-left">Bottom Left</option>
                                        <option value="top-right">Top Right</option>
                                        <option value="top-left">Top Left</option>
                                    </select>
                                </div>
                            </div>
                        </div>

                        <div style="margin-top: 2rem; border-top: 1px solid var(--border-light); padding-top: 1.5rem;">
                            <h4 style="margin-bottom: 1rem; font-size: 1rem; color: var(--text-primary);">üé® Image
                                Filters</h4>

                            <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
                                <div class="setting-group" style="margin: 0;">
                                    <label style="font-size: 0.8rem;">Brightness: <span
                                            id="brightnessValue">100</span>%</label>
                                    <input type="range" id="filterBrightness" min="0" max="200" value="100">
                                </div>
                                <div class="setting-group" style="margin: 0;">
                                    <label style="font-size: 0.8rem;">Contrast: <span
                                            id="contrastValue">100</span>%</label>
                                    <input type="range" id="filterContrast" min="0" max="200" value="100">
                                </div>
                                <div class="setting-group" style="margin: 0;">
                                    <label style="font-size: 0.8rem;">Saturation: <span
                                            id="saturationValue">100</span>%</label>
                                    <input type="range" id="filterSaturation" min="0" max="200" value="100">
                                </div>
                                <div class="setting-group" style="margin: 0;">
                                    <label style="font-size: 0.8rem;">Warmth: <span id="warmthValue">0</span>%</label>
                                    <input type="range" id="filterWarmth" min="0" max="100" value="0">
                                </div>
                            </div>

                            <div class="setting-group">
                                <label style="font-size: 0.8rem;">Sharpening Amount: <span
                                        id="sharpeningValue">0</span>%</label>
                                <input type="range" id="filterSharpening" min="0" max="100" value="0">
                            </div>

                            <div class="advanced-toggles"
                                style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem;">
                                <label class="custom-checkbox">
                                    <input type="checkbox" id="filterGrayscale">
                                    <span class="checkmark"></span>
                                    <span>Grayscale</span>
                                </label>
                                <label class="custom-checkbox">
                                    <input type="checkbox" id="filterSepia">
                                    <span class="checkmark"></span>
                                    <span>Sepia Tone</span>
                                </label>
                            </div>
                        </div>
                    </div>

                    <div class="glass-card">
                        <h3 style="margin-bottom: 1.5rem;">üì¶ Archive & Naming</h3>
                        <div class="setting-group">
                            <label>Naming Scheme</label>
                            <select id="customNaming">
                                <option value="original_size">{Original}_{Size}</option>
                                <option value="original_widthxheight">{Original}_{WxH}</option>
                                <option value="size_only">{Size}</option>
                                <option value="custom">Pattern (Custom)</option>
                            </select>
                            <input type="text" id="customNamingPattern" placeholder="{name}_{width}x{height}.{format}"
                                style="display: none; margin-top: 0.5rem;">
                        </div>
                        <div class="setting-group">
                            <label>Delivery Method</label>
                            <select id="zipFormat">
                                <option value="zip">Single ZIP Archive</option>
                                <option value="individual">Batch Individual Downloads</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Global Actions -->
            <div class="glass-card"
                style="display: flex; justify-content: center; gap: 1.5rem; background: rgba(99, 102, 241, 0.05);">
                <button class="btn btn-primary" id="convertBtn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <path d="M21 2v6h-6"></path>
                        <path d="M3 12a9 9 0 0 1 15-6.7L21 8"></path>
                        <path d="M3 22v-6h6"></path>
                        <path d="M21 12a9 9 0 0 1-15 6.7L3 16"></path>
                    </svg>
                    Process All Images
                </button>
                <button class="btn btn-secondary" id="clearBtn">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                        stroke-linecap="round" stroke-linejoin="round">
                        <polyline points="3 6 5 6 21 6"></polyline>
                        <path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path>
                    </svg>
                    Clear Workspace
                </button>
            </div>

            <!-- Previews -->
            <section id="imagesGridSection">
                <h2 style="margin: 2rem 0 1rem; display: flex; align-items: center; gap: 0.75rem;">
                    üì∏ Source Gallery <span id="imageCount"
                        style="font-size: 1rem; background: var(--primary); color: white; padding: 2px 10px; border-radius: 20px;">0</span>
                </h2>
                <div class="images-grid" id="gridContainer"></div>
            </section>

            <!-- Progress Overlay -->
            <div id="progressSection" style="display: none;">
                <h3 style="margin: 2rem 0 1rem;">‚è≥ Processing Queue</h3>
                <div id="progressContainer" class="progress-list"></div>
            </div>

            <!-- Results -->
            <section id="resultsSection" style="display: none;">
                <h2 style="margin: 2rem 0 1rem;">‚úÖ Optimized Output</h2>
                <div id="resultsContainer"></div>
                <div style="text-align: center; margin-top: 3rem;">
                    <button class="btn btn-primary btn-large" id="downloadAllBtn" style="padding: 1.5rem 4rem;">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
                            stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                            <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"></path>
                            <polyline points="7 10 12 15 17 10"></polyline>
                            <line x1="12" y1="15" x2="12" y2="3"></line>
                        </svg>
                        Download Asset Pack
                    </button>
                </div>
            </section>
        </main>

        <!-- Modals & Tools -->
        <div class="modal" id="presetModal">
            <div class="modal-content">
                <h3>üíæ Save Output Profile</h3>
                <p style="color: var(--text-secondary); margin-bottom: 1.5rem;">Create a reusable preset from your
                    current settings.</p>
                <input type="text" id="presetName" placeholder="e.g. Optimized WebP for Blog">
                <div style="display: flex; gap: 1rem; margin-top: 1.5rem;">
                    <button class="btn btn-primary" id="savePresetConfirmBtn" style="flex: 1;">Save Pattern</button>
                    <button class="btn btn-secondary" id="cancelPresetBtn">Cancel</button>
                </div>
            </div>
        </div>

        <div class="modal" id="editSizeModal">
            <div class="modal-content">
                <h3>‚úèÔ∏è Edit Size</h3>
                <div style="display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; margin-bottom: 1rem;">
                    <div class="setting-group">
                        <label>Width (px)</label>
                        <input type="number" id="editSizeWidth" placeholder="Auto">
                    </div>
                    <div class="setting-group">
                        <label>Height (px)</label>
                        <input type="number" id="editSizeHeight" placeholder="Auto">
                    </div>
                </div>

                <div class="setting-group">
                    <label>Format</label>
                    <select id="editSizeFormat">
                        <option value="png">PNG</option>
                        <option value="jpg">JPG</option>
                        <option value="webp">WebP</option>
                    </select>
                </div>

                <div class="setting-group">
                    <label>Quality: <span id="editQualityValue">80</span>%</label>
                    <input type="range" id="editSizeQuality" min="1" max="100" value="80">
                </div>

                <div class="setting-group">
                    <label>Resize Mode</label>
                    <select id="editSizeResizeMode">
                        <option value="fit">Fit</option>
                        <option value="fill">Fill</option>
                        <option value="stretch">Stretch</option>
                    </select>
                </div>

                <div class="setting-group">
                    <label>Background Color</label>
                    <input type="color" id="editSizeBackground" value="#ffffff" style="width: 100%; height: 40px;">
                </div>

                <label class="custom-checkbox" style="margin-bottom: 1.5rem;">
                    <input type="checkbox" id="editSizeKeepAspect">
                    <span class="checkmark"></span>
                    <span>Maintain Aspect Ratio</span>
                </label>

                <div style="display: flex; gap: 1rem;">
                    <button class="btn btn-primary" id="saveSizeEditBtn" style="flex: 1;">Save Changes</button>
                    <button class="btn btn-secondary" id="cancelSizeEditBtn">Cancel</button>
                </div>
            </div>
        </div>

        <!-- History Sidebar Shortcut -->
        <div class="keyboard-shortcuts">
            <div class="shortcuts-panel" id="shortcutsPanel">
                <h4 style="margin-bottom: 1rem;">‚å®Ô∏è Master Shortcuts</h4>
                <div style="display: flex; flex-direction: column; gap: 0.75rem; font-size: 0.9rem;">
                    <div style="display: flex; justify-content: space-between;"><span>Upload</span> <kbd>Ctrl + U</kbd>
                    </div>
                    <div style="display: flex; justify-content: space-between;"><span>Process</span> <kbd>Ctrl +
                            Enter</kbd></div>
                    <div style="display: flex; justify-content: space-between;"><span>Clear</span> <kbd>Ctrl + Z</kbd>
                    </div>
                    <div style="display: flex; justify-content: space-between;"><span>Download</span> <kbd>Ctrl +
                            D</kbd></div>
                    <div style="display: flex; justify-content: space-between;"><span>History</span> <kbd>Ctrl + H</kbd>
                    </div>
                </div>
            </div>
            <button class="shortcuts-btn" id="shortcutsBtn">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2"
                    stroke-linecap="round" stroke-linejoin="round">
                    <rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect>
                    <path d="M7 11V7a5 5 0 0 1 10 0v4"></path>
                </svg>
            </button>
        </div>
    </div>

    <footer>
        <p>üîí Data Privacy: No imagery leaves your device. All processing is 100% local.</p>
        <p>Built with ‚ù§Ô∏è by <a href="https://github.com/Subhan-Haider" target="_blank" class="credit-link">Subhan
                Haider</a></p>
    </footer>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.10.1/jszip.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/FileSaver.js/2.0.5/FileSaver.min.js"></script>
    <!-- Toast Container -->
    <div id="toastContainer" class="toast-container"></div>

    <script src="app.js"></script>
</body>

</html>